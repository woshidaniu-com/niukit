/*
 * jquery.fixed 插件：详情参见：jquery.fixed.js
 */
;(function(a){a.bootui=a.bootui||{};a.bootui.widget=a.bootui.widget||{};a.bootui.widget.Fixed=function(c,b){b.beforeRender.call(this,c);this.initialize.call(this,c,b);b.afterRender.call(this,c)};a.bootui.widget.Fixed.prototype={constructor:a.bootui.widget.Fixed,initialize:function(c,f){var h=this;this.$element=a(c);this.options=f;this.prefix=f.prefix;if(f.container&&a(f.container).size()==1){var t=a.isWindow(f.container);var j=f.placement.toLowerCase()||"right";a(c).addClass("fixed-"+j);var u=a.extend(true,{},{position:(t?"fixed":"relative"),"z-index":parseInt(f.z_index||1050)+5});if(a.trim(f.margin||"").length>0){a(c).css(""+j,parseInt(a.trim(f.margin))+"px")}function d(){var w=a.Deferred();a(c).css({width:f.width||"40px",height:f.height||"40px"});h.containerPosi=a(f.container).getPosition();h.containerRect=a(f.container).getBoundingRect();h.elementPosi=a(c).getPosition();switch(j){case"left":case"right":var D=f.height?f.height:h.containerPosi.height;a(c).css("height",f.position.height||D||h.elementPosi.height);var E=parseInt(f.position.top||"-1"),B=parseInt(f.position.bottom||"-1");var A=0;var F=Math.abs(h.containerPosi.height-h.elementPosi.height);if(Math.max(E,B)>0){if(E>=B){A=Math.min(F,E)}else{A=Math.abs(F)-B}}else{A=Math.abs(F)/2}a.extend(u,{top:A});break;case"top":case"bottom":var z=h.containerRect["padding-left"];var C=h.containerRect["padding-right"];var x=0;if(!f.width){if(t){x=a(window).width()}else{x=h.containerPosi.width-z-C-h.containerPosi.border}}else{x=f.width}a(c).css("width",f.position.width||x||h.elementPosi.width);var G=parseInt(f.position.left||"-1"),v=parseInt(f.position.right||"-1");var y=0;var F=Math.abs(h.containerPosi.width-h.elementPosi.width);if(Math.max(G,v)>0){if(G>=v){y=Math.min(F,G)}else{y=Math.abs(F)-v}}else{y=Math.abs(F)/2}a.extend(u,{left:y});break}a(c).css(u||{});return w.promise()}d();var e=h.containerRect["margin-top"];var n=h.containerRect["margin-left"];var s=n+a(c).outerWidth(true)*3/2;var q=e+a(c).outerHeight()*3/2;if(t){s+=Math.abs(Math.abs(h.elementPosi.left)-Math.abs(h.containerPosi.left));q+=Math.abs(Math.abs(h.elementPosi.top)-Math.abs(h.containerPosi.top))}var b=h.containerPosi.scrollTop;var o=h.containerPosi.scrollLeft;var i=true;var l=f.animateDelay!=0?(f.animateDelay||200):0;function g(){var v=a.Deferred();switch(j){case"left":case"right":if(!t){a(c).css({top:(b-e)+"px"})}if(b>=f.showPoint){if(i){i=false;a(c).width(0).show(0).animate({width:f.width||"40px"},l)}else{a(c).fadeIn(l)}}else{a(c).fadeOut(l)}break;case"top":case"bottom":if(!t){a(c).css({left:(o-n)+"px"})}if(o>=f.showPoint){if(i){i=false;a(c).height(0).show(0).animate({height:f.height||"40px"},l)}else{a(c).fadeIn(l)}}else{a(c).fadeOut(l)}break}return v.promise()}if(b>=q){g()}else{if(o>=s){g()}}var m=false;var p=f.scrollDelay!=0?(f.scrollDelay||100):0;h.scrollFunc=function(v){if(!m){h.scrollEvent=v;window.setTimeout(function(){b=a(this).scrollTop();o=a(this).scrollLeft();m=true},Math.abs(p-10))}};a(f.container).scroll(h.scrollFunc);h.scrollTimer=window.setInterval(function(){if(m){a.when(g()).done(function(){m=false;(f.onScroll||a.noop).call(this,h.scrollEvent)}).always(function(){})}},p);var r=false;var k=f.resizeDelay!=0?(f.resizeDelay||200):0;h.resizeFunc=function(v){if(!r){window.setTimeout(function(){r=true;h.resizeEvent=v},Math.abs(k-10))}};a(f.container).resize(h.resizeFunc);h.resizeTimer=window.setInterval(function(){if(r){a.when(d(),g()).done(function(){r=false;(f.onResize||a.noop).call(this,h.resizeEvent)}).always(function(){})}},k)}else{throw new Error("Container is not a valid element!")}},destroy:function(){var b=this.options.container;var c=a.isWindow(b);a(b).unbind("scroll",this.scrollFunc);window.clearInterval(this.scrollTimer);a(b).unbind("resize",this.resizeFunc);window.clearInterval(this.resizeTimer);this.$element.off("."+this.prefix).removeData(this.prefix+".widget");var d=this.options.placement.toLowerCase()||"right";a(this.$element).removeClass("fixed-"+d)},setDefaults:function(b){a.extend(a.fn.tooltips.defaults,b)},getDefaults:function(b){return a.fn.tooltips.defaults}};a.fn.fixed=function(c){var b=a.grep(arguments||[],function(e,d){return d>=1});return this.each(function(){var f=a(this);var e=f.data("fixed.widget");if(!e&&c=="destroy"){return}if(!e){var d=a.extend(true,{},a.fn.fixed.defaults,f.data(),((typeof c=="object"&&c)?c:{}));f.data("fixed.widget",(e=new a.bootui.widget.Fixed(this,d)))}if(typeof c=="string"){e[c].apply(e,[].concat(b||[]))}})};a.fn.fixed.defaults={version:"1.0.0",prefix:"fixed",beforeRender:a.noop,errorRender:a.noop,afterRender:a.noop,placement:"right",container:window,width:"auto",height:"auto",margin:"2",showPoint:100,z_index:"1058",resizeDelay:100,scrollDelay:200,animateDelay:200,position:{},onScroll:a.noop,onResize:a.noop};a.fn.fixed.Constructor=a.bootui.widget.Fixed;a(document).on("focus.data-api",'[data-toggle*="fixed"]',function(c){if(c.currentTarget=this){if(a(this).closest(".bootbox").size()>0){var b=a(this).closest(".bootbox");a(this).fixed({container:b,z_index:b.css("z-index")})}else{a(this).fixed({container:"#yhgnPage"})}}})}(jQuery));
/*
 * jquery.fixedpanel 插件：详情参见：jquery.fixedpanel.js
 */
;(function(a){a.bootui=a.bootui||{};a.bootui.widget=a.bootui.widget||{};a.bootui.widget.FixedPanel=function(c,b){b.beforeRender.call(this,c);try{this.initialize.call(this,c,b)}catch(d){b.errorRender.call(this,d)}b.afterRender.call(this,c)};a.bootui.widget.FixedPanel.prototype={constructor:a.bootui.widget.FixedPanel,initialize:function(g,n){if(n.container&&a(n.container).size()==0){throw new Error("Container is not a valid element!")}var h=this;function i(o){do{o+=~~(Math.random()*1000000)}while(document.getElementById(o));return o}this.fixedpanel_uid=i(n.prefix);this.$element=a(g);this.options=n;var l=a(g).closest("div.bootbox");var c=n.container?a(n.container):(a(l).size()>0?a(l).find("div.modal-body"):window);var j=a(l).size()>0?a(l).find("div.modal-body"):document.body;var k=a(l).size()>0?(parseInt(l.css("z-index")||"1050")+90):1010;var e=g;var f=(n.placement||"right").toLocaleLowerCase();if(a.trim(n.content).length>0){e=a(n.template);a(e).attr("id",this.fixedpanel_uid);if(a.trim(n.title).lenght>0){a(e).find(".panel-heading").prepend('<h4 class="fixedpanel-title">'+(a.isFunction(n.title)?n.title.call(this):n.title.toString())+"</h4>")}else{a(e).find(".panel-heading").remove()}a(e).append((a.isFunction(n.content)?n.content.call(this):n.content.toString()));switch(f){case"left":case"top":a(j).prepend(e);break;case"right":case"bottom":a(j).append(e);break}}else{a(e).addClass("panel fixedpanel")}var b=n.rollback||{};if(b&&b.enable){var d=a(e).find(".list-group");var m=a(e).find(".table");if(d.size()>0){a(d).append('<li class="list-group-item btn_rollback">'+b.text+"</li>")}else{if(m.size()>0){a(m).find("tbody").append('<tr class="tr-item"><td class="tr-td-item btn_rollback">'+b.text+"</td></tr>")}}switch(f){case"left":case"right":a(e).find(".btn_rollback").click(function(){a("html,body").animate({scrollTop:b.point},b.speed,b.callback||a.noop)});break;case"top":case"bottom":a(e).find(".btn_rollback").click(function(){a("html,body").animate({scrollLeft:b.point},b.speed,b.callback||a.noop)})}}a(e).fixed({placement:f,container:c,width:n.width||"",height:n.height||"",margin:n.margin||"",showPoint:n.showPoint!=0?(n.showPoint||100):0,z_index:k,resizeDelay:n.resizeDelay,scrollDelay:n.scrollDelay,animateDelay:n.animateDelay,position:n.position||{},onScroll:n.onScroll||a.noop,onResize:n.onResize||a.noop});switch(f){case"left":case"right":a(e).find(".list-group,.table").width(n.width||"auto");break;case"top":case"bottom":a(e).find(".list-group,.table").height(n.height||"auto")}this.fixedpanel=e},destroy:function(){this.$element.off(".fixedpanel.widget.data-api").removeData("fixedpanel");a(this.fixedpanel).fixed("destroy");a("#"+this.fixedpanel_uid).remove()},setDefaults:function(b){a.extend(a.fn.fixedpanel.defaults,b)}};a.fn.fixedpanel=function(c){var b=a.grep(arguments||[],function(e,d){return d>=1});return this.each(function(){var f=a(this),e=f.data("fixedpanel");if(!e&&c=="destroy"){return}if(!e){var d=a.extend(true,{},a.fn.fixedpanel.defaults,f.data(),((typeof c=="object"&&c)?c:{}));f.data("fixedpanel",(e=new a.bootui.widget.FixedPanel(this,d)))}if(typeof c=="string"){e[c].apply(e,[].concat(b||[]))}})};a.fn.fixedpanel.defaults={version:"1.0.0",prefix:"fixedpanel",beforeRender:a.noop,errorRender:a.noop,afterRender:a.noop,onScroll:a.noop,onResize:a.noop,container:null,title:"",placement:"right",width:"auto",height:"auto",margin:"2",showPoint:100,z_index:"1058",resizeDelay:100,scrollDelay:200,animateDelay:200,rollback:{enable:false,text:"\u56de\u5230\u9876\u90e8",point:0,speed:300,callback:a.noop},position:{},content:"",template:'<div class="panel panel-default fixedpanel"><div class="panel-heading"></div></div>'};a.fn.fixedpanel.Constructor=a.bootui.widget.FixedPanel}(jQuery));
