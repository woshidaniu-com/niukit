/*
 * jquery.filehandle 插件：详情参见：jquery.filehandle-1.0.0.js
 */
;(function(a){a.filehandle=function(f,c){var h=this;if(f){c=a.extend(true,{},a.filehandle.defaults,((typeof c=="object"&&c)?c:{}));if(f){var b=0;var e=0;var g=true;var d=a.filehandle.messages;a.each(f||[],function(k,j){if(a.fileMatch(c.fileType,j.name,j.type)){e+=(j.fileSize||j.size);b+=1}else{g=false;c.handleInvalidType.call(h,j,a.filehandle.format(d.needFileType,c.fileType));return false}});if(g){if(b>c.maxCount){c.handleOverMaxCount.call(h,a.filehandle.format(d.overMaxCount,c.maxCount));return false}if(e>a.capacity(c.maxTotal)){c.handleOverTotal.call(h,a.filehandle.format(d.overMaxTotal,c.maxTotal));return false}a.each(f||[],function(k,j){if((j.fileSize||j.size)>a.capacity(c.maxSize)){return c.handleOverSize.call(h,j,a.filehandle.format(d.overMaxSize,c.maxSize));return false}else{c.handleFile.call(h,j,a.filehandle.format(d.successTip,[b,a.capacity(e,"KB")]),{selectedCount:b,total:e})}})}}}};a.filehandle.format=function(b,c){if(arguments.length==1){return function(){var d=a.makeArray(arguments);d.unshift(b);return b.apply(this,d)}}if(arguments.length>2&&c.constructor!=Array){c=a.makeArray(arguments).slice(1)}if(c.constructor!=Array){c=[c]}a.each(c,function(d,e){b=b.replace(new RegExp("\\{"+d+"\\}","g"),e)});return b};a.filehandle.defaults={fileType:"*.*",maxSize:"10M",maxTotal:"100MB",maxCount:30,handleInvalidType:function(b,c){},handleOverMaxCount:function(b){},handleOverTotal:function(b){},handleOverSize:function(b,c){},handleFile:function(c,d,b){}}}(jQuery));
/*
 * jquery.filehandle 插件语言包：详情参见：filehandle/zh_CN.js
 */
;(function(a){a.filehandle.messages={needFileType:"\u53ea\u5141\u8bb8{0}\u7c7b\u578b\u6587\u4ef6",overMaxSize:"\u5355\u4e2a\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7{0}\u6700\u5927\u5141\u8bb8\u4e0a\u4f20\u5927\u5c0f\u9650\u5236",overMaxTotal:"\u603b\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7{0}\u6700\u5927\u5141\u8bb8\u4e0a\u4f20\u5927\u5c0f\u9650\u5236",overMaxCount:"\u8d85\u8fc7{0}\u4e2a\u6700\u5927\u4e0a\u4f20\u6587\u4ef6\u603b\u6570\u9650\u5236",successTip:"\u5df2\u9009\u4e2d{0}\u4e2a\u6587\u4ef6\uff0c\u5171{1}"}}(jQuery));
/*
 * jquery.filestyle 插件：详情参见：jquery.filestyle.js
 */
;(function(c){var b=function(e,d){this.options=d;this.$elementFilestyle=[];this.$element=c(e)};b.prototype={clear:function(){this.$element.val("");this.$elementFilestyle.find(":text").val("");this.$elementFilestyle.find(".badge").remove()},destroy:function(){this.$element.removeAttr("style").removeData("filestyle");this.$elementFilestyle.remove()},disabled:function(d){if(d===true){if(!this.options.disabled){this.$element.attr("disabled","true");this.$elementFilestyle.find("label").attr("disabled","true");this.options.disabled=true}}else{if(d===false){if(this.options.disabled){this.$element.removeAttr("disabled");this.$elementFilestyle.find("label").removeAttr("disabled");this.options.disabled=false}}else{return this.options.disabled}}},buttonBefore:function(d){if(d===true){if(!this.options.buttonBefore){this.options.buttonBefore=true;if(this.options.input){this.$elementFilestyle.remove();this.constructor();this.pushNameFiles()}}}else{if(d===false){if(this.options.buttonBefore){this.options.buttonBefore=false;if(this.options.input){this.$elementFilestyle.remove();this.constructor();this.pushNameFiles()}}}else{return this.options.buttonBefore}}},icon:function(d){if(d===true){if(!this.options.icon){this.options.icon=true;this.$elementFilestyle.find("label").prepend(this.htmlIcon())}}else{if(d===false){if(this.options.icon){this.options.icon=false;this.$elementFilestyle.find(".glyphicon").remove()}}else{return this.options.icon}}},input:function(e){if(e===true){if(!this.options.input){this.options.input=true;if(this.options.buttonBefore){this.$elementFilestyle.append(this.htmlInput())}else{this.$elementFilestyle.prepend(this.htmlInput())}this.$elementFilestyle.find(".badge").remove();this.pushNameFiles();this.$elementFilestyle.find(".group-span-filestyle").addClass("input-group-btn")}}else{if(e===false){if(this.options.input){this.options.input=false;this.$elementFilestyle.find(":text").remove();var d=this.pushNameFiles();if(d.length>0&&this.options.badge){this.$elementFilestyle.find("label").append(' <span class="badge">'+d.length+"</span>")}this.$elementFilestyle.find(".group-span-filestyle").removeClass("input-group-btn")}}else{return this.options.input}}},size:function(f){if(f!==undefined){var e=this.$elementFilestyle.find("label"),d=this.$elementFilestyle.find("input");e.removeClass("btn-lg btn-sm");d.removeClass("input-lg input-sm");if(f!="nr"){e.addClass("btn-"+f);d.addClass("input-"+f)}}else{return this.options.size}},buttonText:function(d){if(d!==undefined){this.options.buttonText=d;this.$elementFilestyle.find("label .buttonText").html(this.options.buttonText)}else{return this.options.buttonText}},buttonName:function(d){if(d!==undefined){this.options.buttonName=d;this.$elementFilestyle.find("label").attr({"class":"btn "+this.options.buttonName})}else{return this.options.buttonName}},iconName:function(d){if(d!==undefined){this.$elementFilestyle.find(".glyphicon").attr({"class":".glyphicon "+this.options.iconName})}else{return this.options.iconName}},htmlIcon:function(){if(this.options.icon){return'<span class="glyphicon '+this.options.iconName+'"></span> '}else{return""}},htmlInput:function(){if(this.options.input){return'<input type="text" class="form-control '+(this.options.size=="nr"?"":"input-"+this.options.size)+'" disabled> '}else{return""}},pushNameFiles:function(){var f="",e=[];if(this.$element[0].files===undefined){e[0]={name:this.$element[0]&&this.$element[0].value}}else{e=this.$element[0].files}for(var d=0;d<e.length;d++){f+=e[d].name.split("\\").pop()+", "}if(f!==""){this.$elementFilestyle.find(":text").val(f.replace(/\, $/g,""))}else{this.$elementFilestyle.find(":text").val("")}return e},constructor:function(){var e=this,g="",i=e.$element.attr("id"),h=[],f="",d;if(i===""||!i){i="filestyle-"+c(".bootstrap-filestyle").length;e.$element.attr({id:i})}f='<span class="group-span-filestyle '+(e.options.input?"input-group-btn":"")+'"><label for="'+i+'" class="btn '+e.options.buttonName+" "+(e.options.size=="nr"?"":"btn-"+e.options.size)+'" '+(e.options.disabled?'disabled="true"':"")+">"+e.htmlIcon()+'<span class="buttonText">'+e.options.buttonText+"</span></label></span>";g=e.options.buttonBefore?f+e.htmlInput():e.htmlInput()+f;e.$elementFilestyle=c('<div class="bootstrap-filestyle input-group">'+g+"</div>");e.$elementFilestyle.find(".group-span-filestyle").attr("tabindex","0").keypress(function(j){if(j.keyCode===13||j.charCode===32){e.$elementFilestyle.find("label").click();return false}});e.$element.css({position:"absolute",clip:"rect(0px 0px 0px 0px)"}).attr("tabindex","-1").after(e.$elementFilestyle);if(e.options.disabled){e.$element.attr("disabled","true")}e.$element.change(function(){var j=e.pushNameFiles();if(e.options.input==false&&e.options.badge){if(e.$elementFilestyle.find(".badge").length==0){e.$elementFilestyle.find("label").append(' <span class="badge">'+j.length+"</span>")}else{if(j.length==0){e.$elementFilestyle.find(".badge").remove()}else{e.$elementFilestyle.find(".badge").html(j.length)}}}else{e.$elementFilestyle.find(".badge").remove()}});if(window.navigator.userAgent.search(/firefox/i)>-1){e.$elementFilestyle.find("label").click(function(){e.$element.click();return false})}}};var a=c.fn.filestyle;c.fn.filestyle=function(f,g){var d="",e=this.each(function(){if(c(this).attr("type")==="file"){var j=c(this),i=j.data("filestyle"),h=c.extend({},c.fn.filestyle.defaults,f,typeof f==="object"&&f);if(!i){j.data("filestyle",(i=new b(this,h)));i.constructor()}if(typeof f==="string"){d=i[f](g)}}});if(typeof d!==undefined){return d}else{return e}};c.fn.filestyle.defaults={buttonText:"Choose file",iconName:"glyphicon-folder-open",buttonName:"btn-default",size:"nr",input:true,badge:true,icon:true,buttonBefore:false,disabled:false};c.fn.filestyle.noConflict=function(){c.fn.filestyle=a;return this};c(function(){c(".filestyle").each(function(){var e=c(this),d={input:e.attr("data-input")==="false"?false:true,icon:e.attr("data-icon")==="false"?false:true,buttonBefore:e.attr("data-buttonBefore")==="true"?true:false,disabled:e.attr("data-disabled")==="true"?true:false,size:e.attr("data-size"),buttonText:e.attr("data-buttonText"),buttonName:e.attr("data-buttonName"),iconName:e.attr("data-iconName"),badge:e.attr("data-badge")==="false"?false:true};e.filestyle(d)})})})(window.jQuery);
