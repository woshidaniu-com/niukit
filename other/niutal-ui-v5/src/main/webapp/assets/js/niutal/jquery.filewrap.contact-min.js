/*
 * jquery.filehandle 插件：详情参见：jquery.filehandle-1.0.0.js
 */
;(function(a){a.filehandle=function(f,c){var h=this;if(f){c=a.extend(true,{},a.filehandle.defaults,((typeof c=="object"&&c)?c:{}));if(f){var b=0;var e=0;var g=true;var d=a.filehandle.messages;a.each(f||[],function(k,j){if(a.fileMatch(c.fileType,j.name,j.type)){e+=(j.fileSize||j.size);b+=1}else{g=false;c.handleInvalidType.call(h,j,a.filehandle.format(d.needFileType,c.fileType));return false}});if(g){if(b>c.maxCount){c.handleOverMaxCount.call(h,a.filehandle.format(d.overMaxCount,c.maxCount));return false}if(e>a.capacity(c.maxTotal)){c.handleOverTotal.call(h,a.filehandle.format(d.overMaxTotal,c.maxTotal));return false}a.each(f||[],function(k,j){if((j.fileSize||j.size)>a.capacity(c.maxSize)){return c.handleOverSize.call(h,j,a.filehandle.format(d.overMaxSize,c.maxSize));return false}else{c.handleFile.call(h,j,a.filehandle.format(d.successTip,[b,a.capacity(e,"KB")]),{selectedCount:b,total:e})}})}}}};a.filehandle.format=function(b,c){if(arguments.length==1){return function(){var d=a.makeArray(arguments);d.unshift(b);return b.apply(this,d)}}if(arguments.length>2&&c.constructor!=Array){c=a.makeArray(arguments).slice(1)}if(c.constructor!=Array){c=[c]}a.each(c,function(d,e){b=b.replace(new RegExp("\\{"+d+"\\}","g"),e)});return b};a.filehandle.defaults={fileType:"*.*",maxSize:"10M",maxTotal:"100MB",maxCount:30,handleInvalidType:function(b,c){},handleOverMaxCount:function(b){},handleOverTotal:function(b){},handleOverSize:function(b,c){},handleFile:function(c,d,b){}}}(jQuery));
/*
 * jquery.filehandle 插件语言包：详情参见：filehandle/zh_CN.js
 */
;(function(a){a.filehandle.messages={needFileType:"\u53ea\u5141\u8bb8{0}\u7c7b\u578b\u6587\u4ef6",overMaxSize:"\u5355\u4e2a\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7{0}\u6700\u5927\u5141\u8bb8\u4e0a\u4f20\u5927\u5c0f\u9650\u5236",overMaxTotal:"\u603b\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7{0}\u6700\u5927\u5141\u8bb8\u4e0a\u4f20\u5927\u5c0f\u9650\u5236",overMaxCount:"\u8d85\u8fc7{0}\u4e2a\u6700\u5927\u4e0a\u4f20\u6587\u4ef6\u603b\u6570\u9650\u5236",successTip:"\u5df2\u9009\u4e2d{0}\u4e2a\u6587\u4ef6\uff0c\u5171{1}"}}(jQuery));
/*
 * jquery.filewrap 插件：详情参见：jquery.filewrap.js
 */
;(function(a){a.bootui=a.bootui||{};a.bootui.widget=a.bootui.widget||{};a.bootui.widget.FileWrap=function(c,b){b.beforeRender.call(this,c);this.initialize.call(this,c,b);b.afterRender.call(this,c)};a.bootui.widget.FileWrap.prototype={constructor:a.bootui.widget.FileWrap,initialize:function(e,j){var g=this;this.$element=a(e);this.options=j;if(!a(e).is(":file")){throw new Error(" Current Element is not a file input ! ")}else{if(a.browser.msie===true&&a.browser.version<9){return}g.initializedFlag=true;var b=a(j.template);var d=a(b).find(".file-input");var h=j.placeholder||a(e).attr("placeholder")||a(e).attr("title")||"\u6d4f\u89c8...";a(d).append("<label>"+h+"</label>");a(b).css({width:j.width||a(e).parent().innerWidth(),height:j.height||a(e).parent().innerHeight()});var i=a(b).find("p.tips");if(j.message&&a.trim(j.message).length>0){a(i).append((a.isFunction(j.message)?j.message.call(this):j.message.toString()))}var c=a.fn.filewrap.messages;var f=a(e).clone(true,true);a(f).change(function(l){a(i).removeClass("error");var k=a(l.target).getFiles()||l.dataTransfer.files;a.filehandle(k,{fileType:j.fileType||"*.*",maxSize:j.maxSize,maxTotal:j.maxTotal,maxCount:j.maxCount,handleInvalidType:function(m,n){a(i).empty().append(n).addClass("error");a(f).clearFile()},handleOverMaxCount:function(m){a(i).empty().append(m).addClass("error");a(f).clearFile()},handleOverTotal:function(m){a(i).empty().append(m).addClass("error");a(f).clearFile()},handleOverSize:function(m,n){a(i).empty().append(n).addClass("error");a(f).clearFile()},handleFile:function(n,o,m){a(i).empty().append(o)}})});a(d).append(f);a(e).replaceWith(b)}},initialized:function(){return this.initializedFlag==true},setDefaults:function(b){a.extend(a.fn.filewrap.defaults,b)},getDefaults:function(){return a.fn.filewrap.defaults}};a.fn.filewrap=function(d){if(typeof d=="string"){var f=a(this[0]),e=f.data("filewrap");if(!e&&d=="destroy"){return}if(e){var c=a.grep(arguments||[],function(h,g){return g>=1});var b=e[d].apply(e,[].concat(c||[]));return(typeof b!="undefined")?b:f}}else{return this.each(function(){var i=a(this),h=i.data("filewrap");if(!h){var g=a.extend(true,{},a.fn.filewrap.defaults,i.data(),((typeof d=="object"&&d)?d:{}));i.data("filewrap",(h=new a.bootui.widget.FileWrap(this,g)))}})}};a.fn.filewrap.defaults={version:"1.0.0",beforeRender:a.noop,errorRender:a.noop,afterRender:a.noop,width:null,height:"80px",placeholder:"\u6d4f\u89c8...",message:null,fileType:"*.*",maxSize:"10M",maxTotal:"100MB",maxCount:30,template:'<div class="filewrap"><div class="placeholder"><div class="wrap"><div class="file-input"></div><p class="tips"></p></div></div></div>'};a.fn.filewrap.Constructor=a.bootui.widget.FileWrap;a(document).off("wrap.filewrap.widget.data-api",'[data-widget*="filewrap"]').on("wrap.filewrap.widget.data-api",'[data-widget*="filewrap"]',function(b){if(b.currentTarget=this){if(a(this).is(":file")){a(this).filewrap()}}})}(jQuery));
