(function(b){b.isHTMLElement=function(e){return((typeof HTMLElement==="object")?function(){return e instanceof HTMLElement}:function(){return e&&typeof e==="object"&&e.nodeType===1&&typeof e.nodeName==="string"}).call(this)};b.fn.isHTMLElement=function(){return b.isHTMLElement(this[0])};var a=b.fn.is,d=b.fn.filter;function c(e){e=b(e);if(e.isHTMLElement()){return !!(e.width()||e.height())&&e.css("display")!=="none"}return true}b.fn.is=function(e){if(e===":visible"){return c(this)}if(e===":hidden"){return !c(this)}return a.call(this,e)};b.fn.filter=function(e){if(e===":visible"){return b([].filter.call(this,function(f){return c(f)}))}if(e===":hidden"){return b([].filter.call(this,function(f){return !c(f)}))}return d.call(this,e)};b.extend({encode:function(e){return encodeURIComponent(encodeURIComponent(e))},defined:function(e){return(typeof e!="undefined"&&e!="undefined"&&e!=null&&e!="null")},founded:function(e){if(b.defined(e)){if(typeof e=="boolean"){return e}else{if(typeof e=="string"){return b.trim(e).length>0}else{if(jQuery.isArray(e)){return jQuery.merge([],e).length>0}else{if(b.isPlainObject(e)){return !b.isEmptyObject(e)}else{return true}}}}}else{return false}},buildForm:function(i,g,e,h){var f=b("#"+(i||"drdcForm"));if(b(f).size()>0&&b(f).is("form")){f=b(f).empty()}else{f=jQuery("<form/>");b(f).css("display","none").appendTo("body")}b(f).attr({id:(i||"drdcForm"),action:g,method:"post",enctype:"application/x-www-form-urlencoded; charset=UTF-8",target:h||"_blank"});b(f).append(b.buildHiddens({gnmkdmKey:jQuery("#gnmkdmKey").val(),sessionUserKey:jQuery("#sessionUserKey").val()},true));b(f).append(b.buildHiddens(e||{},true));return b(f)},buildHiddens:function(f,e){var g=[];b.each(f||{},function(h,i){if(b.isPlainObject(i)&&true==e){g.push(b.buildHiddens(i))}else{if(b.isArray(i)){b.each(i,function(j,k){g.push('<input type="hidden" name="'+h+"["+j+']" value="'+k+'">')})}else{if(b.isFunction(i)){}else{g.push('<input type="hidden" name="'+h+'" value="'+i+'">')}}}});return g.join("")},cloneObj:function(e){return b.extend(true,{},e||{})},mergeObj:function(){var e={};b.each(arguments,function(f,g){b.extend(true,e,g||{})});return e},getTextLength:function(g){var f=g.length;for(var e=0;e<g.length;e+=1){if(g.charCodeAt(e)>127){f+=1}}return f},toBoolean:function(e){if(b.defined(e)){if(b.type(e)=="boolean"){return e}else{if(b.type(e)=="string"){e=b.trim(e).toLowerCase();if("yes"==e||"true"==e||"1"==e){return true}else{if("no"==e||"false"==e||"0"==e){return false}else{return Boolean(e)}}}else{return Boolean(e)}}}else{return false}},toTime:function(i){if(/^([0-1][0-9]|2[0-3])[:]([0-5]{1}[0-9]{1})[:]([0-5]{1}[0-9]{1})?$/mg.test(i)){var e=RegExp.$1,f=RegExp.$2?RegExp.$2:0,g=RegExp.$3?RegExp.$3:0;var h=new Date();h.setHours(e,f,g,0);return h}else{return null}},convertID:function(e){return e.replace(/(:|\(|\)|\{|\}|\-|\.|\#|\@|\$|\%|\^|\&|\*|\!)/g,"\\$1")},getUID:function(e){e=e||"UID_";do{e+=((Math.random()*1000000)+new Date().getTime())}while(document.getElementById(e));return(e+"").replace(".","")},matchURL:function(e){var f=b.trim(e||"").toLowerCase();return typeof e=="string"&&f.length>0&&/(?:\S+\.(?:js|css|properties)(?:\?ver=\S+)?)/.test(f)},matchJS:function(e){var f=b.trim(e||"").toLowerCase();return typeof e=="string"&&f.length>0&&/(?:\S+\.js(?:\?ver=\S+)?)/.test(f)},matchCss:function(e){var f=b.trim(e||"").toLowerCase();return typeof e=="string"&&f.length>0&&/(?:\S+\.css(?:\?ver=\S+)?)/.test(f)}});b.extend(Array.prototype,{indexOf:function(f,g){var g=g||0;for(var e=0;e<this.length;++e){if(this[e]===f){return e}}return -1},remove:function(f,e){var g=[].concat(this);if(b.isNumeric(f)){g.splice(f,1)}else{b.each(this,function(h,j){if(j[e]==f){g.splice(h,1);return false}})}return g}});b.fn.getUID=function(e){var f=b(this).attr("id");if(!b.founded(f)){f=e||"UID_";do{f+=~~((Math.random()*1000000)+new Date().getTime())}while(document.getElementById(f))}return f};b.fn.killFocus=function(){return b(this).each(function(){this.onmousedown=function(){this.blur();this.hideFocus=true;this.style.outline="none"};this.onmouseout=this.onmouseup=function(){this.blur();this.hideFocus=false;this.style.outline=null}})};b.fn.extend({defined:function(){return b(this).size()!=0},founded:function(){var e=b(this).is("select")?b(this).getSelected().val():b(this).val();return b(this).defined()&&b.founded(e)},disabled:function(){return b(this).filter(":input").each(function(){b(this).prop("disabled",true).addClass("disabled").data("disabled",true)})},isDisabled:function(){return !b(this).isEnabled()},enabled:function(){return b(this).filter(":input").each(function(){b(this).prop("disabled",false).removeClass("disabled").removeData("disabled")})},isEnabled:function(){return(b(this).prop("disabled")==false&&!b(this).hasClass("disabled")&&!b(this).data("disabled")===true)},attrs:function(){var g=b(this)[0].attributes;var f={};for(var h=0;h<g.length;h+=1){var e=g[h];if(e.specified){f[e.name]=e.value}}return f},disableContextMenu:function(){b(this).each(function(e,f){b(f).bind("contextmenu",function(){return false})})},getWidget:function(){if(!b.metadata){return{}}else{return b(this).metadata({single:"widget"})}},getValueLength:function(){return b.getTextLength(b(this).val())},getTextLength:function(e){b.getTextLength(b(this).text())},getVisualWidth:function(e){b("#visualLength_ruler").remove();b(document.body).append('<span id="visualLength_ruler">test</span>');var g=b("#visualLength_ruler");b(g).css({visibility:"hidden",display:"none","white-space":"nowrap","font-size":e||"14px"});if(b(this).is(":radio")||b(this).is(":checkbox")){var f=b(this)[0].nextSibling.nodeValue;g.text(this);return b(this).outerWidth()+g[0].offsetWidth}else{return b(this).outerWidth()}},encode:function(){return encodeURIComponent(encodeURIComponent(b(this).val()))},removeOption:function(e){if(b(this).is("select")){if(typeof e=="string"){b(this).find("option").each(function(f,g){if(b(g).val()==e){b(g).remove()}})}else{if(typeof e=="number"){b(this).find("option").eq(e).remove()}}}},buildOptions:function(g,h,e){if(b(this).is("select")){var f=[];if(h&&h==true){f.push('<option value="">--\u8bf7\u9009\u62e9--</option>')}b.each(g||[],function(k,j){var l="";if(b.founded(e)&&e==j.value){l=' selected="selected" '}f.push("<option ");b(j).each(function(m,i){if(m!="value"){f.push(m+'="'+i+'"')}});f.push(' value="'+j.value+'" '+l+">"+j.text+"</option>")});b(this).append(f.join(""))}},setSelected:function(e){return this.each(function(){if(b(this).is("select")){if(typeof e=="string"){b(this).find("option").each(function(f,g){if(b(g).val()==e){b(g).prop("selected",true)}})}else{if(typeof e=="number"){b(this)[0].selectedIndex=e}}}})},getSelected:function(){if(b(this).is("select")){return b(this).find("option:selected")}},getSelectedList:function(){var g=this;var f=b(this).getSelected();if(b(f).size()>1){var e=new Array();b(f).each(function(h,j){e.push(b.extend({},b(g).attrs(),b(j).attrs(),{key:b(j).val(),value:b(j).val(),text:b(j).text()}))});return e}else{return b.extend({},b(this).attrs(),b(f[0]).attrs(),{key:b(f[0]).val(),value:b(f[0]).val(),text:b(f[0]).text()})}},setChecked:function(e){return this.each(function(){if(b(this).is("input")&&b(this).is(function(){var f=b.trim(b(this).attr("type"));return(f==="radio"||f==="checkbox")})){if(typeof e=="string"){b(this).each(function(g,f){if(b(f).val()==e){b(f)[0].checked=true}})}else{if(typeof e=="number"){b(this).get(e).checked=true}}}})},getChecked:function(){if(b(this).is(":radio")||b(this).is(":checkbox")){var f=b(this).filter(":checked");if(b(f).size()>1){var e=new Array();b(f).each(function(g,h){e.push(b(h))});return e}else{return b(f[0])}}},getCheckedList:function(){var g=this;if(b(this).is(":radio")||b(this).is(":checkbox")){var f=b(g).filter(":checked");if(b(f).size()>1){var e=new Array();b(f).each(function(h,j){e.push(b.extend({},b(g).attrs(),b(j).attrs(),{key:b(j).val(),value:b(j).val(),text:b(j)[0].nextSibling.nodeValue}))});return e}else{return b.extend({},b(g).attrs(),b(f[0]).attrs(),{key:b(f[0]).val(),value:b(f[0]).val(),text:b(f[0])[0].nextSibling.nodeValue})}}},getPosition:function(){var f=this,g=this[0];var e=g.tagName=="BODY";return b.extend({},(typeof g.getBoundingClientRect=="function")?g.getBoundingClientRect():null,{scroll:e?document.documentElement.scrollTop||document.body.scrollTop:f.scrollTop(),width:e?b(window).width():f.outerWidth(),height:e?b(window).height():f.outerHeight()},e?{top:0,left:0}:f.offset())},getElementID:function(){return b.convertID(b.trim(b(this).attr("id")))}});b.fn.getRealElement=function(){var g=this;var f=b(this).getElementID();var e="#"+f+"_chosen";if(b.defined(b(this).data("chosen"))||b(e).size()>0){g=b(e)}else{if(b(this).prev("div.bootstrap-tagsinput").size()>0){g=b(this).prev("div.bootstrap-tagsinput")}else{if(b(this).parent().hasClass("input-group-tooltips")){g=b(this).parent()}else{if(b(this).is(":radio")||b(this).is(":checkbox")){g=b("input[name='"+b(this).attr("name")+"']").first()}}}}return b(g)};b.fn.getTargetElement=function(){var g=b(this).closest("td");var f=b(this).closest(".form-group");var e=b(this).closest(".input-group");if(g.size()>0){return g}else{if(f.size()>0){return f}else{if(e.size()>0){return e}else{return b(this).parent().parent()}}}};b.fn.loadIframe=function(e,g){var h={progress:b.noop,complete:b.noop};var f=b(this[0]);if(!b(f).is("iframe")){throw new Error(" Current Element is not an iframe ! ")}else{return b.when(b.Deferred(function(i){var n=b.trim(e).toLowerCase();if(typeof e=="string"&&n.length>0){try{var q=b.extend(true,{},h,b(f).data(),((typeof g=="object"&&g)?g:{}));var l=function(){f.onload=f.onreadystatechange=f.onerror=null};var m=function(){if((!this.readyState)||(/loaded|complete/.test(this.readyState))){if(b.isFunction(q.complete)){q.complete.call(this)}l();i.resolve()}};var o=function(){l();if(q.ignore&&q.ignore!=true){i.reject()}};var k=window.setInterval(function(){if(f){if((!f.readyState)||(/loaded|complete/.test(f.readyState))){window.clearInterval(k)}else{if(b.isFunction(q.progress)){q.progress.call(f)}}}else{window.clearInterval(k)}},100);if(f.attachEvent){f.attachEvent("onload",function(){alert("Local iframe is now loaded.");if(j){return}m.call(this);j=true});f.attachEvent("onerror",function(){o.call(this)})}else{var j=false;f.onload=f.onreadystatechange=function(){alert("Local iframe is now loaded.");if(j){return}m.call(this);j=true};f.onerror=function(){o.call(this)}}f.src=e}catch(p){throw new Error(p)}}else{i.resolve()}}))}};b.fn.serializeJSON=function(f){var e={};b(this).find("input[type!='button'][type!='file'],select,textarea").each(function(k,j){var l=b(this).attr("name"),h;if(!e[l]){if(b(this).is("select")){h=b(this).find("option:selected").val()}else{if(b(this).is(":radio")){var g=b("input[name='"+l+"']").filter(":checked");h=b(g[0]).val()}else{if(b(this).is(":checkbox")){var g=b("input[name='"+l+"']").filter(":checked");if(b(g).size()>1){h=new Array();b(g).each(function(n,o){h.push(b(o).val())})}else{h=b(g[0]).val()}}else{h=b(this).val()}}}if(h){if(b.isArray(h)){var m=[];b.each(h||[],function(n,o){m.push((f!=false?encodeURIComponent(o):o))});e[l].push(m.join(","))}else{e[l]=f!=false?encodeURIComponent(h):h}}else{e[l]=""}}});return e};b.delay=function(e,g){e=e||b.noop;g=g||b.noop;var f=null;b.when(b.Deferred(function(h){f=window.setInterval(function(){var i=true;b.each([].concat(e.call()),function(j,k){if(!k){i=false}return i});if(i&&h){h.resolve();window.clearInterval(f)}},1000)}).promise()).done(g)}})(jQuery);
