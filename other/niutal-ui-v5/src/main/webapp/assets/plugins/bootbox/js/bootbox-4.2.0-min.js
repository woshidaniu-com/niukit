(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{if(typeof exports==="object"){module.exports=b(require("jquery"))}else{a.bootbox=b(a.jQuery)}}}(this,function init(j,d){var n={dialog:"<div class='bootbox modal sl_mod' tabindex='-1' role='dialog' aria-labelledby='myModalLabel' aria-hidden='true'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",progress:"<div class='modal-progress'><div class='progress' ><div class='progress-bar progress-bar-info progress-bar-striped active' role='progressbar' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100'  style='width: 0%;'>0%</div></div></div>",footer:"<div class='modal-footer'></div>",fixed:"<div class='modal-fixed'></div>",fullScreen:"<div class='bootbox-full'><i class='fa fa-square'></i></div>",closeButton:'<input type="hidden" name="focusInput"/><button type="button" class="bootbox-close-button btn-sm close bootbox-close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>',form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}};var g={locale:"en",backdrop:true,animate:true,className:null,closeButton:true,show:true,fullScreen:true,progress:false,progressID:"bootboxStatus",btnlock:false,draggable:false,container:"body",width:"800px",height:d,max_height:d,fixedTarget:null,offAtOnce:true,offsetHeight:200,offsetWidth:20,beforeRender:j.noop,afterRender:j.noop};var i={};function q(s){var r=a[g.locale];return r?r[s]:a.en[s]}function e(v,u,s,x){v.stopPropagation();v.preventDefault();var w=j.extend({},this,{options:s,api:window.api,content:self||window,dialog:u,document:u.find(".bootbox-body"),close:function(){u.modal("hide")},reload:function(){if(j.trim(s.href).length>0){var B=u.find(".modal-body");var A=u.find(".modal-dialog");var z='<h3 class="header smaller lighter grey loading-spinner align-center"  style="min-height: 100px !important;"><i class="icon-spinner icon-spin orange bigger-160"></i><span>&nbsp;&nbsp;\u9875\u9762\u6b63\u5728\u52a0\u8f7d\u4e2d...</span></h3>';B.find(".bootbox-body").empty().html(z);if(s.href.indexOf("?")>-1){s.href=s.href+"&time="+(new Date()).getTime()}else{s.href=s.href+"?time="+(new Date()).getTime()}window.api={data:s.data||{},opener:s.opener,document:u.find(".bootbox-body")};var y=j.extend(true,{},s.data||{});delete y.colModel;window.setTimeout(function(){j.ajaxSetup({async:true});B.find(".bootbox-body").empty().load(s.href,y,function(){s.isLoaded=true;u.triggerHandler("loaded.bs.modal")});j.ajaxSetup({async:false})},200)}},button:function(z){if(z&&z.id){var y=j.extend(true,{},z);delete y.id;u.find(".modal-footer").find("button[data-bb-handler='"+z.id+"']").prop(y)}}});if(s.btnlock){var t=j(v.target);j.when(j.Deferred(function(z){t.button("loading");var y=j.isFunction(x)&&x.call(j.extend(w,{reset:function(){z.resolve()}}),v)===false;if(!y){u.modal("hide")}}).promise()).always(function(){t.button("reset")})}else{var r=j.isFunction(x)&&x.call(j.extend(w,{reset:function(){}}),v)===false;if(!r){u.modal("hide")}}}function k(u){var r,s=0;for(r in u){s++}return s}function l(t,s){var r=0;j.each(t,function(u,v){s(u,v,r++)})}function c(r){var t;var s;if(typeof r!=="object"){throw new Error("Please supply an object of options")}if(!r.href&&!r.message){throw new Error("Please specify a href or message")}r=j.extend({},g,r);if(!r.buttons){r.buttons={}}r.backdrop=r.backdrop?"static":false;t=r.buttons;s=k(t);l(t,function(w,v,u){if(j.isFunction(v)){v=t[w]={callback:v}}if(j.type(v)!=="object"){throw new Error("button with key "+w+" must be an object")}if(!v.label){v.label=w}if(!v.className){if(s<=2&&u===s-1){v.className="btn-default"}else{v.className="btn-primary"}}});return r}function h(s,t){var u=s.length;var r={};if(u<1||u>4){throw new Error("Invalid argument length")}if(u===3||typeof s[0]==="string"){r[t[0]]=s[0];r[t[1]]=s[1];r[t[2]]=s[2]}else{if(u===2||typeof s[0]==="string"){r[t[0]]=s[0];r[t[1]]=s[1]}else{r=s[0]}}return r}function m(t,r,s){return j.extend(true,{},t,h(r,s))}function f(u,v,t,s){var r={className:"bootbox-"+u,buttons:p.apply(null,v)};return o(m(r,s,t),v)}function p(){var v={};for(var t=0,r=arguments.length;t<r;t++){var u=arguments[t];var s=u.toLowerCase();var w=u.toUpperCase();v[s]={label:q(w)}}return v}function o(r,t){var s={};l(t,function(u,v){s[v]=true});l(r.buttons,function(u){if(s[u]===d){throw new Error("button key "+u+" is not allowed (options are "+t.join("\n")+")")}});return r}i.alert=function(){var r;r=f("alert",["ok"],["title","message","callback"],arguments);r.draggable=true;r.fullScreen=false;if(arguments.length==4){j.extend(r,arguments[3])}if(r.callback&&!j.isFunction(r.callback)){throw new Error("alert requires callback property to be a function when provided")}r.buttons.ok.callback=r.onEscape=r.onClose=function(){if(j.isFunction(r.callback)){return r.callback.call(this)}return true};r.isLoaded=false;return i.dialog(r)};i.confirm=function(){var r;r=f("confirm",["confirm","cancel"],["title","message","callback"],arguments);r.draggable=true;r.fullScreen=false;if(arguments.length==4){j.extend(true,r,arguments[3])}r.buttons.cancel.callback=r.onEscape=r.onClose=function(){return r.callback.call(this,false)};r.buttons.confirm.callback=function(){return r.callback.call(this,true)};if(!j.isFunction(r.callback)){throw new Error("confirm requires a callback")}r.isLoaded=false;return i.dialog(r)};i.prompt=function(){var B;var u;var y;var r;var z;var t;var x;r=j(n.form);u={className:"bootbox-prompt",buttons:p("confirm","cancel"),value:"",inputType:"text"};B=o(m(u,arguments,["title","callback"]),["confirm","cancel"]);B.draggable=true;B.fullScreen=false;if(arguments.length==3){j.extend(true,B,arguments[2])}t=(B.show===d)?true:B.show;var w=["date","time","number"];var v=document.createElement("input");v.setAttribute("type",B.inputType);if(w[B.inputType]){B.inputType=v.type}B.message=r;B.buttons.cancel.callback=B.onEscape=B.onClose=function(){return B.callback.call(this,null)};B.buttons.confirm.callback=function(){var D;switch(B.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":D=z.val();break;case"checkbox":var C=z.find("input:checked");D=[];l(C,function(E,F){D.push(j(F).val())});break}return B.callback.call(this,D)};B.show=false;if(!B.title){throw new Error("prompt requires a title")}if(!j.isFunction(B.callback)){throw new Error("prompt requires a callback")}if(!n.inputs[B.inputType]){throw new Error("invalid prompt type")}z=j(n.inputs[B.inputType]);switch(B.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":z.val(B.value);break;case"select":var s={};x=B.inputOptions||[];if(!x.length){throw new Error("prompt with select requires options")}l(x,function(C,D){var E=z;if(D.value===d||D.text===d){throw new Error("given options in wrong format")}if(D.group){if(!s[D.group]){s[D.group]=j("<optgroup/>").attr("label",D.group)}E=s[D.group]}E.append("<option value='"+D.value+"'>"+D.text+"</option>")});l(s,function(C,D){z.append(D)});z.val(B.value);break;case"checkbox":var A=j.isArray(B.value)?B.value:[B.value];x=B.inputOptions||[];if(!x.length){throw new Error("prompt with checkbox requires options")}if(!x[0].value||!x[0].text){throw new Error("given options in wrong format")}z=j("<div/>");l(x,function(C,D){var E=j(n.inputs[B.inputType]);E.find("input").attr("value",D.value);E.find("label").append(D.text);l(A,function(F,G){if(G===D.value){E.find("input").prop("checked",true)}});z.append(E)});break}if(B.placeholder){z.attr("placeholder",B.placeholder)}if(B.pattern){z.attr("pattern",B.pattern)}r.append(z);r.on("submit",function(C){C.preventDefault();y.find(".btn-primary").click()});B.isLoaded=false;y=i.dialog(B);y.off("shown.bs.modal");y.on("shown.bs.modal",function(){z.focus()});if(t===true){y.modal("show")}return y};i.loadBody=function(s,r,u){if(s&&r&&j.trim(r.href).length>0){var w=j(s).find(".modal-body");if(w.size()>0){var v='<h3 class="header smaller lighter grey loading-spinner align-center"  style="min-height: 100px !important;"><i class="icon-spinner icon-spin orange bigger-160"></i><span>&nbsp;&nbsp;\u9875\u9762\u6b63\u5728\u52a0\u8f7d\u4e2d...</span></h3>';w.find(".bootbox-body").html(v);if(r.href.indexOf("?")>-1){r.href=r.href+"&time="+(new Date()).getTime()}else{r.href=r.href+"?time="+(new Date()).getTime()}window.api={data:r.data||{},opener:j("div.bootbox").size()>0?j("div.bootbox").last():document.body,document:s.find(".bootbox-body")};var t=j.extend(true,{},r.data||{});delete t.colModel;j.ajaxSetup({async:false});w.find(".bootbox-body").load(r.href,t,function(){r.isLoaded=true;u.resolve()});j.ajaxSetup({async:true})}}};i.dialog=function(v){delete g.width;v=c(v);v.opener=j("div.bootbox").size()>0?j("div.bootbox").last():document.body;v.beforeRender.call(this);var K=j(n.dialog);var A=K.find(".modal-body");var G=K.find(".modal-dialog");var E=K.find(".modal-header");var C=K.find(".bootbox-body");var B=K.find(".modal-footer");function L(){return(v.className=="bootbox-alert"||v.className=="bootbox-confirm"||v.className=="bootbox-prompt")}function D(){var O=j(window).width();var N=j.isFunction(v.width)?v.width.call(this):v.width;if(N&&/.*%$/.test(N)){return{windowWidth:O,realWidth:(O*parseFloat(N))/100}}N=parseInt(N);if(L()){return{windowWidth:O,realWidth:N}}var P=Math.max(Math.min(N,O),0);if(N>=O){P=O-v.offsetWidth*2}else{if(O<=768){P=O-v.offsetWidth*2}else{if(N>=300){P=N}else{if(O>1280){P=O-v.offsetWidth*4}else{if(O>768&&O<=1280){P=O-v.offsetWidth*2}}}}}P=Math.max(P,300);return{windowWidth:O,realWidth:P}}function z(){A=K.find(".modal-body");G=K.find(".modal-dialog");E=K.find(".modal-header");C=K.find(".bootbox-body");B=K.find(".modal-footer");var O=j(window).width();var N=j(window).height();var S=j.fn.actual?j("#navbar_container").actual("outerHeight"):j("#navbar_container").outerHeight(true);var P=Math.abs(N-S);var T=(j.fn.actual?G.actual("outerHeight"):G.outerHeight(true))||G.height();var R=(j.fn.actual?E.actual("outerHeight"):E.outerHeight(true))||E.height();var V=(j.fn.actual?B.actual("outerHeight"):B.outerHeight(true))||B.height();var Q=T-R-V;var U=Math.abs(Math.abs(P-v.offsetHeight)-R-V);return{windowWidth:O,windowHeight:N,navbarHeight:S,containerHeight:P,dialogHeight:T,headerHeight:R,contentHeight:Q,footerHeight:V,maxHeight:U,top:function(){if(L()){return(N-T)/2}return(P-T)/2+S}.call(this)}}function w(){var Q=z();var N=D();var P=N.realWidth;var R;if((Math.max(Q.top,0)<50)){R=(Math.max(Q.top,0))}else{R=(Math.max(Q.top,0)-50)}if(v.draggable&&j.fn.draggable){G.addClass("modal-dialog-reset");var O=(N.windowWidth-G.width())/2;if(N.windowWidth>768||L()){G.attr({style:"width: "+P+"px;"});G.css({left:O+"px",top:R+"px",width:P+"px"})}else{G.css({left:O+"px",top:(Q.navbarHeight)+"px",width:P+"px"})}}else{if(N.windowWidth>768||L()){G.attr({style:"width: "+P+"px;"});G.css({top:R+"px",width:P+"px"})}else{G.css({top:(Q.navbarHeight)+"px",width:P+"px"})}}F()}function x(){try{var O=window.contentWindow.document.body.scrollHeight;var Q=window.contentWindow.document.documentElement.scrollHeight;var N=Math.max(O,Q);return N}catch(P){return j(window).height()}}function F(){setTimeout(function(){var N=j(window).height();var O;var P=K.find(".bootbox-body").height();if(K.hasClass("box-full-screen")){O=N-140}else{O=N-200}if(O>350&&P>300){G.find(".modal-body").css({"max-height":(v.max_height?v.max_height:O)})}else{G.find(".bootbox-body").css({"max-height":"auto",});G.find(".bootbox-body").removeAttr("overflow-x");G.find(".bootbox-body").removeAttr("overflow-y")}if(parseInt(P)<200){K.find(".modal-body").css({"overflow-y":"inherit"})}else{K.find(".modal-body").css({"overflow-y":"scroll"})}if(parseInt(P)<100){K.find(".modal-body").css({"overflow-x":"inherit"})}},700)}j(K).data("options",v);var J=v.buttons;var u="";var M={onEscape:v.onEscape||j.noop,onClose:v.onClose||v.onEscape||j.noop};l(J,function(O,N){u+="<button id='btn_"+O+"' data-bb-handler='"+O+"' data-loading-text='"+N.label+"' type='button' class='btn btn-sm "+N.className+"'>"+N.label+"</button>";M[O]=N.callback});if(v.animate===true){K.addClass("fade")}if(v.width){var I=D();var r=I.realWidth;if(r){K.className=K.className||"bootbox-"+r;G.attr({style:"width: "+r+"px;"})}}if(v.height){var t=v.height?"height":"max-height",H=v.height||this.options.maxHeight;if(H){K.find(".modal-body").css(t,H)}}if(v.max_height){K.find(".modal-body").css("max-height",v.max_height)}else{F()}if(v.className){K.addClass(v.className)}else{K.addClass("bootbox-dialog")}if(v.title){A.before(n.header)}if(v.closeButton){var s=j(n.closeButton);if(v.title){K.find(".modal-header").prepend(s)}else{s.css("margin-top","-10px").prependTo(A)}}if(v.fullScreen){var y=j(n.fullScreen);K.find(".modal-header .bootbox-close").after(y);j(document).off("click",".bootbox-full").on("click",".bootbox-full",function(){if(K.hasClass("box-full-screen")){K.removeClass("box-full-screen");K.find(".modal-header .fa-minus-square-o").addClass("fa-square").removeClass("fa-minus-square-o")}else{K.addClass("box-full-screen");K.find(".modal-header .fa-square").addClass("fa-minus-square-o").removeClass("fa-square")}j(window).trigger("resize");F()})}if(v.modalName){K.attr("name",v.modalName);K.attr("id",v.modalName)}if(v.title){K.find(".modal-title").html(v.title)}if(u.length){A.after(n.footer);K.find(".modal-footer").html(u)}if(v.progress){A.after(n.progress);K.find(".progress-bar").attr("id",v.progressID||"bootboxStatus")}K.on("loaded.bs.modal",function(){if(j.isFunction(v.onLoaded)){v.onLoaded.call(this,K)}});j.when(j.Deferred(function(N){K.data("def",N);if(v.message){A.find(".bootbox-body").html(v.message);N.resolve()}else{i.loadBody(K,v,N)}}).promise()).done(function(){F();j(K).trigger("loaded.bs.modal")});K.on("hide.bs.modal",function(N){K.off("resize.bs.modal").off("resized.bs.modal");if(j.isFunction(v.onHide)){v.onHide.call(this,N)}});K.on("hidden.bs.modal",function(N){if(N.target===this){K.remove()}if(j("div.bootbox").size()==0){j(document.body).removeClass("modal-open")}if(j.fn.fixed&&v.fixedTarget&&j(v.fixedTarget).size()==1){j(v.fixedTarget).fixed("destroy")}if(j.isFunction(v.onHidden)){v.onHidden.call(this,N)}});K.on("resized.bs.modal",function(N){w();if(j.isFunction(v.onResized)){v.onResized.call(this,N)}});K.on("show.bs.modal",function(N){if(v.backdrop){K.next(".modal-backdrop").addClass("bootbox-backdrop")}if(j.isFunction(v.onShow)){v.onShow.call(this,N)}});K.on("shown.bs.modal",function(Q){w();var P=j("div.bootbox").size();if(P>1){var N=parseInt(K.css("z-index")||"1050");var O=N+((P-1)*100);K.css("z-index",O+100);if(v.backdrop!=false){j(document.body).find("div.modal-backdrop").last().css("z-index",O)}}K.find("input[name='focusInput']").focus();if(v.draggable&&j.fn.draggable){G.draggable({scroll:true,containment:G.closest(".bootbox"),handle:".modal-header,.modal-footer",start:function(R,T){var S=T.helper.offset().left;T.helper.addClass("modal-dialog-reset")},drag:function(R,S){},stop:function(R,S){if(S.helper.offset().top<0){G.css({top:"0"})}F()}});K.find(".modal-header,.modal-footer").css("cursor","move")}v.afterRender.call({api:window.api,content:self||window,document:K.find(".bootbox-body"),close:function(){K.modal("hide")},button:function(S){if(S&&S.id){var R=j.extend(true,{},S);delete R.id;K.find(".modal-footer").find("button[data-bb-handler='"+S.id+"']").prop(R)}}});K.removeClass("hide");if(j.isFunction(v.onShown)){v.onShown.call(this,Q)}j(window).trigger("resize");F()});K.on("escape.close.bb",function(N){if(M.onEscape){e(N,K,v,M.onEscape)}});K.on("click",".modal-footer button",function(O){var N=j(this).data("bb-handler");e(O,K,v,M[N])});K.on("click",".bootbox-close-button",function(N){if(M.onClose){e(N,K,v,M.onClose)}});K.on("keyup",function(N){if(N.which===27){K.trigger("escape.close.bb")}});j(v.container).append(K);j.when(K.data("def")).done(function(){var N=z();if(L()){G.css({top:Math.max(N.top,0)+"px",})}K.modal({backdrop:v.backdrop,keyboard:true,replace:true,show:false});K.off("resize.bs.modal");if(v.show){K.modal("show")}j(window).resize(function(O){var P=G.data("def");if(P){return false}j.when(j.Deferred(function(Q){G.data("def",Q);K.triggerHandler("resized.bs.modal",[O]);window.setTimeout(function(){Q.resolve()},500)}).promise()).done(function(){G.removeData("def")})})});return K};i.setDefaults=function(){var r={};if(arguments.length===2){r[arguments[0]]=arguments[1]}else{r=arguments[0]}j.extend(g,r)};var b=function(s){if(s){var r=s.contentWindow;try{s.src="about:blank";r.document.write("");r.document.close();r.document.clear()}catch(t){}j(s).remove()}};i.hideModal=function(r){j(".bootbox[name="+r+"]").find("iframe").each(function(s,t){if(typeof b=="function"){b(t)}});j(".bootbox[name="+r+"]").modal("hide")};i.hideAll=function(){j(".bootbox").find("iframe").each(function(r,s){if(typeof b=="function"){b(s)}});j(".bootbox").modal("hide")};var a={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"\u05d0\u05d9\u05e9\u05d5\u05e8",CANCEL:"\u05d1\u05d9\u05d8\u05d5\u05dc",CONFIRM:"\u05d0\u05d9\u05e9\u05d5\u05e8"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},lt:{OK:"Gerai",CANCEL:"At\u0161aukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprin\u0101t"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierd\u017a"},ru:{OK:"OK",CANCEL:"\u041e\u0442\u043c\u0435\u043d\u0430",CONFIRM:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},tr:{OK:"Tamam",CANCEL:"\u0130ptal",CONFIRM:"Onayla"},zh_CN:{OK:"\u786e  \u5b9a",CANCEL:"\u53d6  \u6d88",CONFIRM:"\u786e  \u8ba4"},zh_TW:{OK:"OK",CANCEL:"\u53d6\u6d88",CONFIRM:"\u78ba\u8a8d"}};i.init=function(r){return init(r||j)};return i}));
