/*!
 * Viewer v0.1.0
 * https://github.com/fengyuanchen/viewer
 *
 * Copyright (c) 2015 Fengyuan Chen
 * Released under the MIT license
 *
 * Date: 2015-09-02T09:08:17.666Z
 */

/*20170123，zp，增加对iE8的兼容*/(function(d){"function"===typeof define&&define.amd?define("viewer",["jquery"],d):"object"===typeof exports?d(require("jquery")):d(jQuery)})(function(d){function m(a){return"number"===typeof a&&!isNaN(a)}function y(a){return"undefined"===typeof a}function z(a,b){var c=[];m(b)&&c.push(b);return c.slice.apply(a,c)}function v(a,b){var c=z(arguments,2);return function(){return a.apply(b,c.concat(z(arguments)))}}function D(a){var b=[],c=a.rotate,d=a.scaleX;a=a.scaleY;m(c)&&b.push("rotate("+c+"deg)");m(d)&&m(a)&&b.push("scale("+d+","+a+")");return b.length?b.join(" "):"none"}function A(a,b){var c;if(a.naturalWidth)return b(a.naturalWidth,a.naturalHeight);c=document.createElement("img");c.onload=function(){b(this.width,this.height)};c.src=a.src}function p(a,b){this.$element=d(a);this.options=d.extend({},p.DEFAULTS,d.isPlainObject(b)&&b);this.target=this.action=this.transitioning=this.fading=this.playing=this.isPlayed=this.isFulled=this.isViewed=this.isShown=this.isBuilt=this.isImg=!1;this.length=this.index=0;this.init()}var w=d(window),B=d(document),E="undefined"!==typeof document.createElement("viewer").style.transition,F=Math.round,C=Math.sqrt,x=Math.abs,u=Math.min,t=Math.max,q=parseFloat,r={};d.extend(r,{init:function(){var a=this.options,b=this.$element,c=b.is("img"),g=c?b:b.find("img"),e=g.length,f=d.proxy(this.ready,this);if(e){if(d.isFunction(a.build))b.one("build.viewer",a.build);this.trigger("build.viewer").isDefaultPrevented()||(E||(a.transition=!1),this.isImg=c,this.length=e,this.count=0,this.$images=g,this.$body=d("body"),a.inline?(b.one("built.viewer",d.proxy(function(){this.view()},this)),g.each(function(){if(this.complete)f();else d(this).one("load.viewer",f)})):(g.addClass("viewer-toggle"),b.on("click.viewer",d.proxy(this.start,this))))}},ready:function(){this.count++;this.count===this.length&&this.build()}});d.extend(r,{build:function(){var a=this.options,b=this.$element,c,g,e,f;if(!this.isBuilt){c&&c.length||(c=b.parent());this.$parent=c;this.$viewer=g=d(p.TEMPLATE);this.$canvas=g.find(".viewer-canvas");this.$footer=g.find(".viewer-footer");this.$title=g.find(".viewer-title").toggleClass("viewer-hide",!a.title);this.$toolbar=f=g.find(".viewer-toolbar").toggleClass("viewer-hide",!a.toolbar);this.$navbar=g.find(".viewer-navbar").toggleClass("viewer-hide",!a.navbar);this.$button=e=g.find(".viewer-button").toggleClass("viewer-hide",!a.button);this.$tooltip=g.find(".viewer-tooltip");this.$player=g.find(".viewer-player");this.$list=g.find(".viewer-list");f.find("li[class*\x3dzoom]").toggleClass("viewer-invisible",!a.zoomable);f.find("li[class*\x3dflip]").toggleClass("viewer-invisible",!a.scalable);a.rotatable||f.find("li[class*\x3drotate]").addClass("viewer-invisible").appendTo(f);a.inline?(e.addClass("viewer-fullscreen"),g.css("z-index",a.zIndexInline),"static"===c.css("position")&&c.css("position","relative")):(e.addClass("viewer-close"),g.css("z-index",a.zIndex).addClass("viewer-fixed viewer-fade viewer-hide"));b.after(g);a.inline&&(this.render(),this.bind(),this.isShown=!0);this.isBuilt=!0;if(d.isFunction(a.built))b.one("built.viewer",a.built);this.trigger("built.viewer")}},unbuild:function(){var a=this.options,b=this.$element;this.isBuilt&&(a.inline&&!a.container&&b.removeClass("viewer-hide"),this.$viewer.remove())}});d.extend(r,{bind:function(){this.$viewer.on("click.viewer",d.proxy(this.click,this)).on("wheel mousewheel DOMMouseScroll",d.proxy(this.wheel,this));this.$canvas.on("mousedown touchstart pointerdown MSPointerDown",d.proxy(this.mousedown,this));B.on("mousemove touchmove pointermove MSPointerMove",this._mousemove=v(this.mousemove,this)).on("mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",this._mouseup=v(this.mouseup,this)).on("keydown.viewer",this._keydown=v(this.keydown,this));w.on("resize.viewer",this._resize=v(this.resize,this))},unbind:function(){this.$viewer.off("click.viewer",this.click).off("wheel mousewheel DOMMouseScroll",this.wheel);this.$canvas.off("mousedown touchstart pointerdown MSPointerDown",this.mousedown);B.off("mousemove touchmove pointermove MSPointerMove",this._mousemove).off("mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",this._mouseup).off("keydown.viewer",this._keydown);w.off("resize.viewer",this._resize)}});d.extend(r,{render:function(){this.initContainer();this.initViewer();this.initList();this.renderViewer()},initContainer:function(){this.container={width:w.innerWidth(),height:w.innerHeight()}},initViewer:function(){var a=this.options,b=this.$parent,c;a.inline&&(this.parent=c={width:t(b.width(),a.minWidth),height:t(b.height(),a.minHeight)});if(this.isFulled||!c)c=this.container;this.viewer=d.extend({},c)},renderViewer:function(){this.options.inline&&!this.isFulled&&this.$viewer.css(this.viewer)},initList:function(){var a=this.options,b=this.$element,c=this.$list,g=[];this.$images.each(function(b){var c=this.src,e;(e=this.alt)||(e="string"===typeof c?c.replace(/^.*\//,"").replace(/[\?&#].*$/,""):"");var k=a.url;c&&("string"===typeof k?k=this.getAttribute(k):d.isFunction(k)&&(k=k.call(this,this)),g.push('\x3cli\x3e\x3cimg src\x3d"'+c+'" data-action\x3d"view" data-index\x3d"'+b+'" data-original-url\x3d"'+(k||c)+'" alt\x3d"'+e+'"\x3e\x3c/li\x3e'))});c.html(g.join("")).find("img").one("load.viewer",{filled:!0},d.proxy(this.loadImage,this));this.$items=c.children();if(a.transition)b.one("viewed.viewer",function(){c.addClass("viewer-transition")})},renderList:function(a){a=a||this.index;var b=this.$items.eq(a).width(),c=b+1;this.$list.css({width:c*this.length,marginLeft:(this.viewer.width-b)/2-c*a})},resetList:function(){this.$list.empty().removeClass("viewer-transition").css("margin-left",0)},initImage:function(a){var b=this.options,c=this.$image,g=this.viewer,e=this.$footer.height(),f=g.width,h=t(g.height-e,e),k=this.image||{};A(c[0],d.proxy(function(c,g){var e=c/g,n=f,l=h;h*e>f?l=f/e:n=h*e;n=u(.9*n,c);l=u(.9*l,g);n={naturalWidth:c,naturalHeight:g,aspectRatio:e,ratio:n/c,width:n,height:l,left:(f-n)/2,top:(h-l)/2};e=d.extend({},n);b.rotatable&&(n.rotate=k.rotate||0,e.rotate=0);b.scalable&&(n.scaleX=k.scaleX||1,n.scaleY=k.scaleY||1,e.scaleX=1,e.scaleY=1);this.image=n;this.initialImage=e;d.isFunction(a)&&a()},this))},renderImage:function(a){var b=this.image,c=this.$image;c.css({width:b.width,height:b.height,marginLeft:b.left,marginTop:b.top,transform:D(b)});if(d.isFunction(a))if(this.options.transition)c.one("transitionend",a);else a()},resetImage:function(){this.$image.remove();this.$image=null}});d.extend(r,{start:function(a){a=a.target;d(a).hasClass("viewer-toggle")&&(this.target=a,this.show())},click:function(a){a=d(a.target);var b=a.data("action"),c=this.image;switch(b){case "mix":this.isPlayed?this.stop():this.options.inline?this.isFulled?this.exit():this.full():this.hide();break;case "view":this.view(a.data("index"));break;case "zoom-in":this.zoom(.1,!0);break;case "zoom-out":this.zoom(-.1,!0);break;case "one-to-one":1===this.image.ratio?this.zoomTo(this.initialImage.ratio):this.zoomTo(1);break;case "reset":this.reset();break;case "prev":this.prev();break;case "play":this.play();break;case "next":this.next();break;case "rotate-left":this.rotate(-90);break;case "rotate-right":this.rotate(90);break;case "flip-horizontal":this.scale(-c.scaleX||-1,c.scaleY||1);break;case "flip-vertical":this.scale(c.scaleX||1,-c.scaleY||-1);break;default:this.isPlayed&&this.stop()}},load:function(){this.initImage(d.proxy(function(){this.renderImage(d.proxy(function(){this.isViewed=!0;this.trigger("viewed.viewer")},this))},this))},loadImage:function(a){var b=a.target,c=d(b),g=c.parent(),e=g.width(),f=g.height(),h=a.data&&a.data.filled;A(b,d.proxy(function(a,b){var d=a/b,g=e,k=f;f*d>e?h?g=f*d:k=e/d:h?k=e/d:g=f*d;c.css({width:g,height:k,marginLeft:(e-g)/2,marginTop:(f-k)/2})},this))},resize:function(){this.initContainer();this.initViewer();this.renderViewer();this.renderList();this.initImage(d.proxy(function(){this.renderImage()},this));this.isPlayed&&this.$player.find("img").one("load.viewer",d.proxy(this.loadImage,this)).trigger("load.viewer")},wheel:function(a){var b=a.originalEvent,c=q(this.options.zoomRatio)||.1,d=1;this.isViewed&&(a.preventDefault(),b.deltaY?d=0<b.deltaY?1:-1:b.wheelDelta?d=-b.wheelDelta/120:b.detail&&(d=0<b.detail?1:-1),this.zoom(-d*c,!0))},keydown:function(a){var b=this.options;if(this.isFulled&&b.keyboard)switch(a.which){case 27:this.isPlayed?this.stop():b.inline?this.isFulled&&this.exit():this.hide();break;case 37:this.prev();break;case 38:this.zoom(b.zoomRatio,!0);break;case 39:this.next();break;case 40:this.zoom(-b.zoomRatio,!0);break;case 48:case 49:if(a.ctrlKey||a.shiftKey)a.preventDefault(),1===this.image.ratio?this.zoomTo(this.initialImage.ratio):this.zoomTo(1)}},mousedown:function(a){var b=this.options,c=a.originalEvent,d=c&&c.touches,e=a,f=b.movable?"move":!1;if(this.isViewed){if(d){e=d.length;if(1<e)if(b.zoomable&&2===e)e=d[1],this.startX2=e.pageX,this.startY2=e.pageY,f="zoom";else return;else this.isSwitchable()&&(f="switch");e=d[0]}f&&(a.preventDefault(),"move"===f&&b.transition&&this.$image.removeClass("viewer-transition"),this.action=f,this.startX=e.pageX||c&&c.pageX,this.startY=e.pageY||c&&c.pageY)}},mousemove:function(a){var b=this.options,c=a.originalEvent,d=c&&c.touches,e=a;if(this.isViewed){if(d){e=d.length;if(1<e)if(b.zoomable&&2===e)e=d[1],this.endX2=e.pageX,this.endY2=e.pageY;else return;e=d[0]}this.action&&(a.preventDefault(),this.endX=e.pageX||c&&c.pageX,this.endY=e.pageY||c&&c.pageY,this.change())}},mouseup:function(a){var b=this.action;b&&(a.preventDefault(),"move"===b&&this.options.transition&&this.$image.addClass("viewer-transition"),this.action=!1)}});d.extend(r,{show:function(){var a=this.options,b;if(!a.inline&&!this.transitioning){this.isBuilt||this.build();if(d.isFunction(a.show))this.$element.one("show.viewer",a.show);this.trigger("show.viewer").isDefaultPrevented()||(this.$body.addClass("viewer-open"),b=this.$viewer.removeClass("viewer-hide"),this.$element.one("shown.viewer",d.proxy(function(){this.view((this.target?this.$images.index(this.target):0)||this.index);this.target=!1},this)),a.transition?(this.transitioning=!0,b.addClass("viewer-transition").get(0).offsetWidth,b.one("transitionend",d.proxy(this.shown,this)).addClass("viewer-in")):(b.addClass("viewer-in"),this.shown()))}},hide:function(){var a=this.options,b=this.$viewer;if(!a.inline&&!this.transitioning&&this.isShown){if(d.isFunction(a.hide))this.$element.one("hide.viewer",a.hide);this.trigger("hide.viewer").isDefaultPrevented()||(this.isViewed&&a.transition?(this.transitioning=!0,this.$image.one("transitionend",d.proxy(function(){b.one("transitionend",d.proxy(this.hidden,this)).removeClass("viewer-in")},this)),this.zoomTo(0,!1,!0)):(b.removeClass("viewer-in"),this.hidden()))}},view:function(a){var b=this.options,c=this.viewer,g=this.$title,e,f,h,k;a=Number(a)||0;!this.isShown||this.isPlayed||0>a||a>=this.length||this.isViewed&&a===this.index||this.trigger("view.viewer").isDefaultPrevented()||(f=this.$items.eq(a),e=f.find("img"),h=e.data("originalUrl"),k=e.attr("alt"),this.$image=e=d('\x3cimg src\x3d"'+h+'" alt\x3d"'+k+'"\x3e'),e.toggleClass("viewer-transition",b.transition).toggleClass("viewer-move",b.movable).css({width:0,height:0,marginLeft:c.width/2,marginTop:c.height/2}),this.$items.eq(this.index).removeClass("viewer-active"),f.addClass("viewer-active"),this.isViewed=!1,this.index=a,this.image=null,e.one("load.viewer",d.proxy(this.load,this)),this.$canvas.html(e),g.empty(),this.renderList(),this.$element.one("viewed.viewer",d.proxy(function(){var a=this.image;g.html(k+" ("+a.naturalWidth+" \x26times; "+a.naturalHeight+")")},this)))},prev:function(){this.view(t(this.index-1,0))},next:function(){this.view(u(this.index+1,this.length-1))},move:function(a,b){var c=this.image;y(b)&&(b=a);a=q(a);b=q(b);this.isShown&&!this.isPlayed&&this.options.movable&&(c.left+=m(a)?a:0,c.top+=m(b)?b:0,this.renderImage())},zoom:function(a,b){var c=this.options,d=t(.01,c.minZoomRatio),e=u(100,c.maxZoomRatio),f=this.image,h;a=q(a);m(a)&&this.isShown&&!this.isPlayed&&c.zoomable&&(a=0>a?1/(1-a):1+a,c=f.width*a,h=f.height*a,a=c/f.naturalWidth,a=u(t(a,d),e),.95<a&&1.05>a&&(a=1,c=f.naturalWidth,h=f.naturalHeight),f.left-=(c-f.width)/2,f.top-=(h-f.height)/2,f.width=c,f.height=h,f.ratio=a,this.renderImage(),b&&this.tooltip())},zoomTo:function(a,b,c){var d=this.image,e;a=t(a,0);m(a)&&this.isShown&&!this.isPlayed&&(c||this.options.zoomable)&&(c=d.naturalWidth*a,e=d.naturalHeight*a,d.left-=(c-d.width)/2,d.top-=(e-d.height)/2,d.width=c,d.height=e,d.ratio=a,this.renderImage(),b&&this.tooltip())},rotate:function(a){var b=this.image;a=q(a);m(a)&&this.isShown&&!this.isPlayed&&this.options.rotatable&&(b.rotate=(b.rotate||0)+a,this.renderImage())},rotateTo:function(a){var b=this.image;a=q(a);m(a)&&this.isShown&&!this.isPlayed&&this.options.rotatable&&(b.rotate=a,this.renderImage())},scale:function(a,b){var c=this.image;y(b)&&(b=a);a=q(a);b=q(b);this.isShown&&!this.isPlayed&&this.options.scalable&&(c.scaleX=m(a)?a:1,c.scaleY=m(b)?b:1,this.renderImage())},scaleX:function(a){this.scale(a,this.image.scaleY)},scaleY:function(a){this.scale(this.image.scaleX,a)},play:function(){var a=this.options,b=this.$player,c=d.proxy(this.loadImage,this),g=[],e=0,f=0,h;this.isShown&&!this.isPlayed&&(a.fullscreen&&this.fullscreen(),this.isPlayed=!0,b.addClass("viewer-show"),this.$items.each(function(k){var h=d(this),l=h.find("img"),l=d('\x3cimg src\x3d"'+l.data("originalUrl")+'" alt\x3d"'+l.attr("alt")+'"\x3e');e++;l.addClass("viewer-fade").toggleClass("viewer-transition",a.transition);h.hasClass("viewer-active")&&(l.addClass("viewer-in"),f=k);g.push(l);l.one("load.viewer",{filled:!1},c);b.append(l)}),m(a.interval)&&0<a.interval&&(h=d.proxy(function(){this.playing=setTimeout(function(){g[f].removeClass("viewer-in");f++;f=f<e?f:0;g[f].addClass("viewer-in");h()},a.interval)},this),1<e&&h()))},stop:function(){this.isPlayed&&(this.isPlayed=!1,clearTimeout(this.playing),this.$player.removeClass("viewer-show").empty())},full:function(){var a=this.options,b=this.$image,c=this.$list;this.isShown&&!this.isPlayed&&!this.isFulled&&a.inline&&(this.isFulled=!0,this.$body.addClass("viewer-open"),this.$button.addClass("viewer-fullscreen-exit"),a.transition&&(b.removeClass("viewer-transition"),c.removeClass("viewer-transition")),this.$viewer.addClass("viewer-fixed").removeAttr("style").css("z-index",a.zIndex),this.initContainer(),this.viewer=d.extend({},this.container),this.renderList(),this.initImage(d.proxy(function(){this.renderImage(function(){a.transition&&setTimeout(function(){b.addClass("viewer-transition");c.addClass("viewer-transition")},0)})},this)))},exit:function(){var a=this.options,b=this.$image,c=this.$list;this.isFulled&&(this.isFulled=!1,this.$body.removeClass("viewer-open"),this.$button.removeClass("viewer-fullscreen-exit"),a.transition&&(b.removeClass("viewer-transition"),c.removeClass("viewer-transition")),this.$viewer.removeClass("viewer-fixed").css("z-index",a.zIndexInline),this.viewer=d.extend({},this.parent),this.renderViewer(),this.renderList(),this.initImage(d.proxy(function(){this.renderImage(function(){a.transition&&setTimeout(function(){b.addClass("viewer-transition");c.addClass("viewer-transition")},0)})},this)))},tooltip:function(){var a=this.options,b=this.$tooltip,c=this.image;this.isShown&&!this.isPlayed&&a.tooltip&&(b.text(F(100*c.ratio)+"%"),this.fading?clearTimeout(this.fading):a.transition?(b.addClass("viewer-show viewer-fade viewer-transition").get(0).offsetWidth,b.addClass("viewer-in")):b.addClass("viewer-show"),this.fading=setTimeout(d.proxy(function(){a.transition?b.one("transitionend",function(){b.removeClass("viewer-show viewer-fade viewer-transition")}).removeClass("viewer-in"):b.removeClass("viewer-show");this.fading=!1},this),1E3))},toggle:function(){1===this.image.ratio?this.zoomTo(this.initialImage.ratio):this.zoomTo(1)},reset:function(){this.isShown&&!this.isPlayed&&(this.image=d.extend({},this.initialImage),this.renderImage())},destroy:function(){var a=this.$element;this.options.inline?this.unbind():(this.isShown&&this.unbind(),this.$images.removeClass("viewer-toggle"),a.off("click.viewer",this.start));this.unbuild();a.removeData("viewer")}});d.extend(r,{trigger:function(a,b){var c=d.Event(a,b);this.$element.trigger(c);return c},shown:function(){var a=this.options;this.transitioning=!1;this.isVisible=this.isShown=this.isFulled=!0;this.render();this.bind();if(d.isFunction(a.shown))this.$element.one("shown.viewer",a.shown);this.trigger("shown.viewer")},hidden:function(){var a=this.options;this.isVisible=this.isShown=this.isFulled=this.isViewed=this.transitioning=!1;this.unbind();this.$body.removeClass("viewer-open");this.$viewer.addClass("viewer-hide");this.resetList();this.resetImage();if(d.isFunction(a.hidden))this.$element.one("hidden.viewer",a.hidden);this.trigger("hidden.viewer")},fullscreen:function(){var a=document.documentElement;!this.isFulled||document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||(a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))},change:function(){var a=this.endX-this.startX,b=this.endY-this.startY;switch(this.action){case "move":this.move(a,b);break;case "zoom":this.zoom(function(a,b,d,f){a=C(a*a+b*b);return(C(d*d+f*f)-a)/a}(x(this.startX-this.startX2),x(this.startY-this.startY2),x(this.endX-this.endX2),x(this.endY-this.endY2)));this.startX2=this.endX2;this.startY2=this.endY2;break;case "switch":this.action="switched",1<a?this.prev():-1>a&&this.next()}this.startX=this.endX;this.startY=this.endY},isSwitchable:function(){var a=this.image,b=this.viewer;return 0<=a.left&&0<=a.top&&a.width<=b.width&&a.height<=b.height}});d.extend(p.prototype,r);p.DEFAULTS={inline:!1,button:!0,navbar:!0,title:!0,toolbar:!0,tooltip:!0,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,transition:!0,fullscreen:!0,keyboard:!0,interval:5E3,minWidth:200,minHeight:100,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,zIndex:2015,zIndexInline:0,url:"src",build:null,built:null,show:null,shown:null,hide:null,hidden:null};p.TEMPLATE='\x3cdiv class\x3d"viewer-container"\x3e\x3cdiv class\x3d"viewer-background"\x3e\x3c/div\x3e\x3cdiv class\x3d"viewer-canvas"\x3e\x3c/div\x3e\x3cdiv class\x3d"viewer-footer"\x3e\x3cdiv class\x3d"viewer-title"\x3e\x3c/div\x3e\x3cul class\x3d"viewer-toolbar"\x3e\x3cli class\x3d"viewer-zoom-in" data-action\x3d"zoom-in"\x3e\x3c/li\x3e\x3cli class\x3d"viewer-zoom-out" data-action\x3d"zoom-out"\x3e\x3c/li\x3e\x3cli class\x3d"viewer-one-to-one" data-action\x3d"one-to-one"\x3e\x3c/li\x3e\x3cli class\x3d"viewer-reset" data-action\x3d"reset"\x3e\x3c/li\x3e\x3cli class\x3d"viewer-prev" data-action\x3d"prev"\x3e\x3c/li\x3e\x3cli class\x3d"viewer-play" data-action\x3d"play"\x3e\x3c/li\x3e\x3cli class\x3d"viewer-next" data-action\x3d"next"\x3e\x3c/li\x3e\x3cli class\x3d"viewer-rotate-left" data-action\x3d"rotate-left"\x3e\x3c/li\x3e\x3cli class\x3d"viewer-rotate-right" data-action\x3d"rotate-right"\x3e\x3c/li\x3e\x3cli class\x3d"viewer-flip-horizontal" data-action\x3d"flip-horizontal"\x3e\x3c/li\x3e\x3cli class\x3d"viewer-flip-vertical" data-action\x3d"flip-vertical"\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"viewer-navbar"\x3e\x3cdiv class\x3d"viewer-navbar-background"\x3e\x3c/div\x3e\x3cul class\x3d"viewer-list"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"viewer-tooltip"\x3e\x3c/div\x3e\x3cdiv class\x3d"viewer-button-background"\x3e\x3c/div\x3e\x3cdiv class\x3d"viewer-button" data-action\x3d"mix"\x3e\x3c/div\x3e\x3cdiv class\x3d"viewer-player"\x3e\x3c/div\x3e\x3c/div\x3e';p.other=d.fn.viewer;d.fn.viewer=function(a){var b=z(arguments,1),c;this.each(function(){var g=d(this),e=g.data("viewer"),f;if(!e){if(/destroy|hide|exit|stop|reset/.test(a))return;g.data("viewer",e=new p(this,a))}"string"===typeof a&&d.isFunction(f=e[a])&&(c=f.apply(e,b))});return y(c)?this:c};d.fn.viewer.Constructor=p;d.fn.viewer.setDefaults=p.setDefaults;d.fn.viewer.noConflict=function(){d.fn.viewer=p.other;return this}});