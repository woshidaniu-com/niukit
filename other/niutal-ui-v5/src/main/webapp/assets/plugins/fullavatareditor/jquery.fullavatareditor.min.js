/*
 * @discretion	: jQuery fullAvatarEditor 插件
 * @author    	: wandalong 
 * @version		: v1.0.0
 */(function(a){a.bootui=a.bootui||{};a.bootui.widget=a.bootui.widget||{};a.bootui.widget.FullAvatarEditor=function(a,c){c.beforeRender.call(this,a);try{this.initialize.call(this,a,c)}catch(f){c.errorRender.call(this,f)}c.afterRender.call(this,a)};a.bootui.widget.FullAvatarEditor.prototype={constructor:a.bootui.widget.FullAvatarEditor,initialize:function(b,c){var f=0,g=window.setInterval(function(){if(20<=f)throw window.clearInterval(g),Error("swfobject not initialized");swfobject&&(window.clearInterval(g),swfobject.addDomLoadEvent(function(){a.when(a.Deferred(function(e){a(b).data("def",e);try{var f=function(a){do a+=~~(1E6*Math.random());while(document.getElementById(a));return a},d=c.flashvars||{};a.each(d,function(a,c){if("upload_url"==a||"src_url"==a)d[a]=encodeURIComponent(d[a])});d.id=d.id||f("fullavatareditor");d.src_size_over_limit=d.src_size_over_limit.replace("{src_size}",d.src_size);d.browse_tip=d.browse_tip.replace("{src_size}",d.src_size);var g=a.extend({menu:"true",scale:"noScale",allowFullscreen:"true",allowScriptAccess:"always",wmode:"transparent"},c.params||{}),k=a.extend({id:d.id,name:d.id},c.attributes||{});swfobject.embedSWF(c.file,c.container,c.width,c.height,c.version,c.expressInstall,d,g,k,function(a){e.resolve();var b=a.ref;b.eventHandler=function(a){c.onEvent.call(b,a)};window.swf=b})}catch(h){a(b).show(),console.error(h),e.reject()}}).promise()).done(function(){a(b).show();a(b).removeData("def")})}));f+=1},500);a.extend(!0,this,{getSwfObject:function(){if(a(b).data("def"))throw Error("FullAvatarEditor not initialized");return window.swf},destroy:function(){a(b).off(".fullAvatarEditor").removeData("bootui.fullAvatarEditor")}})},setDefaults:function(b){a.extend(a.fn.fullAvatarEditor.defaults,b)},getDefaults:function(){return a.fn.fullAvatarEditor.defaults}};a.fn.fullAvatarEditor=function(b){var c=a.grep(arguments||[],function(a,b){return 1<=b}),f="";this.each(function(){var g=a(this),e=g.data("bootui.fullAvatarEditor");if(e||"destroy"!=b)e||(e=a.extend(!0,{},a.fn.fullAvatarEditor.defaults,g.data(),"object"==typeof b&&b?b:{}),g.data("bootui.fullAvatarEditor",e=new a.bootui.widget.FullAvatarEditor(this,e))),"string"==typeof b&&(f=e[b].apply(e,[].concat(c||[])))});return f};a.fn.fullAvatarEditor.defaults={beforeRender:a.noop,errorRender:a.noop,afterRender:a.noop,container:"swf_container",width:630,height:430,version:"10.1.0",file:_path+"/js/plugins/fullavatareditor/fullAvatarEditor.swf",expressInstall:_path+"/js/plugins/fullavatareditor/expressInstall.swf",attributes:{},params:{menu:"true",scale:"noScale",allowFullscreen:"true",allowScriptAccess:"always",wmode:"transparent"},flashvars:{id:"swf_container",upload_url:"",method:"post",quality:100,src_url:"",src_size:"8MB",src_upload:0,src_size_over_limit:"\u9009\u62e9\u7684\u6587\u4ef6\u5927\u5c0f\uff08{0}\uff09\u8d85\u51fa\u9650\u5236\uff08{src_size}\uff09\n\u8bf7\u91cd\u65b0\u9009\u62e9",browse_tip:"\u4ec5\u652f\u6301JPG\u3001JPEG\u3001GIF\u3001PNG\u683c\u5f0f\u7684\u56fe\u7247\u6587\u4ef6\n\u6587\u4ef6\u4e0d\u80fd\u5927\u4e8e{src_size}",tab_visible:!1,browse_box_align:"left",browse_box_width:300,browse_box_height:300,button_visible:!1,checkbox_visible:!1,webcam_box_align:38,webcam_box_align:"left",avatar_sizes:"150*200",avatar_sizes_desc:"150*200\u50cf\u7d20",avatar_field_names:"image1",avatar_intro:"\u6700\u7ec8\u4f1a\u751f\u6210\u4ee5\u4e0b\u5c3a\u5bf8\u7684\u5934\u50cf\uff0c\u8bf7\u6ce8\u610f\u662f\u5426\u6e05\u6670",avatar_tools_visible:!0},onEvent:function(a){}}})(jQuery);